<h1>{{vm.titulo}}</h1>

<div class="row">
    <div class="col-12 bg-light border border-info mb-4">
      <h4>Resumen Contratos: </h4>
      <p><strong>Num contratos sin acciones: </strong> {{vm.contratosSinAcciones.length}}</p>
      <p><strong>Num contratos entre 1 y 3 acciones: </strong> {{vm.contratosConAcciones1a3.length}}</p>
      <p><strong>Num contratos con mas de 3 acciones: </strong> {{vm.contratosConAccionesMas3.length}}</p>
      <p><strong>Primer contrato que dentro de las ACCIONES tenga "clave":"SITUACION": </strong>{{vm.primerContratoSituacion.idColumn}}</p>
      <p><strong>Último contrato que dentro de las ACCIONES tenga "clave":"SITUACION": </strong>{{vm.ultimoContratoSituacion.idColumn}}</p>
      <p><strong>Todas las acciones distintas: </strong></p>
      <ol>
        <li ng-repeat="accion in vm.acciones">{{accion}}</li>
      </ol>
 
    </div>

    <div class="col-6">
       <h2>Todos los contratos</h2>
        <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            Filtro
        </button>
        
        <div class="collapse" id="collapseExample">
            <div class="card card-body">
                <label for="nombre">Nombre </label>
                <input type="text" class="col-6 form-control" placeholder="Buscar..." ng-model="busqueda.nombre">
            </div>
        </div>
        <span class="d-block"><strong>Número de contratos:</strong> {{vm.contratos.length}}</span>

        
        <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col" ng-click="campo= 'nombre'; orden= !orden">Nombre</th>
                <th scope="col" ng-click="campo= 'ACCIONES.length'; orden= !orden">Núm. acciones</th>     
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="contrato in vm.contratos | filter: busqueda | orderBy: campo: orden">
                <td>{{contrato.idColumn}}</td>
                <td ng-class="{'text-danger': {{!contrato.nombre.length}}}">{{contrato.nombre.length?contrato.nombre:'Sin nombre'}}</td>
                <td>{{contrato.ACCIONES?contrato.ACCIONES.length:'0'}}</td>
              </tr>
            </tbody>
        </table>



    </div>

    <div class="col-6">
        <h2>Contratos mapeados</h2>
            <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                Filtro
            </button>
            
            <div class="collapse" id="collapseExample">
                <div class="card card-body">
                    <label for="nombre">Nombre </label>
                    <input type="text" class="col-6 form-control" placeholder="Buscar..." ng-model="busqueda.nombre">
                </div>
            </div>
            <span class="d-block"><strong>Número de contratos:</strong> {{vm.contratosMapeados.length}}</span>
    
            
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col" ng-click="campo= 'id'; orden= !orden">#</th>
                    <th scope="col" ng-click="campo= 'nombre'; orden= !orden">Nombre</th>
                    <th scope="col" ng-click="campo= 'numeroAcciones'; orden= !orden">Núm. acciones</th>     
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="contrato in vm.contratosMapeados | filter: busqueda | orderBy: campo: orden">
                    <td>{{contrato.id}}</td>
                    <td ng-class="{'text-danger': {{!contrato.nombre.length}}}">{{contrato.nombre}}</td>
                    <td>{{contrato.numeroAcciones}}</td>
                  </tr>
                </tbody>
            </table>
    
    
    
        </div>
    <div class="col-6 bg-light">
        <pre>
            {{vm.contratos | json}}
        </pre>

    </div>


</div>